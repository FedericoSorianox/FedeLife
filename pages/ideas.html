<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fede Life - Ideas</title>
    <link rel="stylesheet" href="app.css">
</head>

<body class="body">
    <nav class="navbar">
        <ul>
            <li><a href="index.html">Inicio</a></li>
            <li><a href="finanzas.html">Finanzas</a></li>
            <li><a href="ideas.html">Ideas</a></li>
            <li><a href="tareas.html">Tareas</a></li>
            <li><a href="bruce.html">Bruce</a></li>
        </ul>
    </nav>
    <header style="background-color: #87ccd8;">
        <h1>Ideas</h1>
        <p class="textcenter">Aqu√≠ puedes gestionar y visualizar tus ideas.</p>
    </header>
    <section class="section">
        <h2 class="ideas-title">Mis Ideas</h2>

        <!-- Formulario para agregar nueva idea -->
        <div class="add-idea-container">
            <div class="idea-form">
                <input type="text" id="ideaTitle" placeholder="T√≠tulo de la idea..." maxlength="100">
                <textarea id="ideaDescription" placeholder="Descripci√≥n detallada de tu idea..." rows="3"></textarea>
                <button id="addIdeaBtn" onclick="addIdea()">Agregar Idea</button>
            </div>
        </div>

        <!-- Container de ideas -->
        <div class="ideas-container" id="ideasContainer">
            <!-- Las ideas se cargar√°n din√°micamente aqu√≠ -->
        </div>
    </section>

    <!-- Modal para detalles de idea -->
    <div id="ideaModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeIdeaModal()">&times;</span>
            <h2 id="modalTitle">Detalles de la Idea</h2>

            <div class="modal-tabs">
                <button class="tab-button active" onclick="openTab(event, 'details')">Detalles</button>
                <button class="tab-button" onclick="openTab(event, 'notes')">Notas</button>
                <button class="tab-button" onclick="openTab(event, 'tasks')">Tareas</button>
                <button class="tab-button" onclick="openTab(event, 'resources')">Recursos</button>
            </div>

            <div id="details" class="tab-content active">
                <div class="edit-form">
                    <label>T√≠tulo:</label>
                    <input type="text" id="editTitle" maxlength="100">

                    <label>Descripci√≥n:</label>
                    <textarea id="editDescription" rows="4"></textarea>

                    <div class="form-row">
                        <div>
                            <label>Categor√≠a:</label>
                            <select id="editCategory">
                                <option value="Tecnolog√≠a">Tecnolog√≠a</option>
                                <option value="Negocios">Negocios</option>
                                <option value="Creatividad">Creatividad</option>
                                <option value="Personal">Personal</option>
                                <option value="Innovaci√≥n">Innovaci√≥n</option>
                                <option value="Proyectos">Proyectos</option>
                                <option value="Otro">Otro</option>
                            </select>
                        </div>
                        <div>
                            <label>Prioridad:</label>
                            <select id="editPriority">
                                <option value="baja">Baja</option>
                                <option value="media">Media</option>
                                <option value="alta">Alta</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div>
                            <label>Estado:</label>
                            <select id="editStatus">
                                <option value="idea">üí° Idea</option>
                                <option value="desarrollo">üî® En Desarrollo</option>
                                <option value="pausa">‚è∏Ô∏è En Pausa</option>
                                <option value="completado">‚úÖ Completado</option>
                                <option value="cancelado">‚ùå Cancelado</option>
                            </select>
                        </div>
                        <div>
                            <label>Progreso:</label>
                            <input type="range" id="editProgress" min="0" max="100" step="5">
                            <span id="progressValue">0%</span>
                        </div>
                    </div>
                </div>
            </div>

            <div id="notes" class="tab-content">
                <div class="notes-section">
                    <h3>Notas y Reflexiones</h3>
                    <textarea id="ideaNotes" rows="8"
                        placeholder="Escribe aqu√≠ tus notas, reflexiones, ideas adicionales..."></textarea>
                </div>
            </div>

            <div id="tasks" class="tab-content">
                <div class="tasks-section">
                    <h3>Tareas Relacionadas</h3>
                    <div class="add-task-form">
                        <input type="text" id="newTaskText" placeholder="Nueva tarea...">
                        <button onclick="addTaskToIdea()">Agregar</button>
                    </div>
                    <ul id="ideaTasks" class="task-list-modal">
                        <!-- Las tareas se cargar√°n aqu√≠ -->
                    </ul>
                </div>
            </div>

            <div id="resources" class="tab-content">
                <div class="resources-section">
                    <h3>Recursos y Enlaces</h3>
                    <div class="add-resource-form">
                        <input type="text" id="resourceTitle" placeholder="T√≠tulo del recurso...">
                        <input type="url" id="resourceUrl" placeholder="URL del recurso...">
                        <button onclick="addResourceToIdea()">Agregar Recurso</button>
                    </div>
                    <ul id="ideaResources" class="resources-list">
                        <!-- Los recursos se cargar√°n aqu√≠ -->
                    </ul>
                </div>
            </div>

            <div class="modal-actions">
                <button onclick="saveIdeaChanges()" class="save-btn">Guardar Cambios</button>
                <button onclick="deleteCurrentIdea()" class="delete-btn">Eliminar Idea</button>
                <button onclick="closeIdeaModal()" class="cancel-btn">Cancelar</button>
            </div>
        </div>
    </div>
    <footer class="footer">
        <p>&copy; Desde 1992 Fede Life. Todos los derechos reservados.</p>
    </footer>

    <!-- JavaScript para gesti√≥n de ideas -->
    <script>
        let ideas = JSON.parse(localStorage.getItem('ideas')) || [];
        let currentIdeaIndex = -1;

        // Inicializar la p√°gina
        document.addEventListener('DOMContentLoaded', function () {
            displayIdeas();

            // Event listener para el rango de progreso
            document.getElementById('editProgress').addEventListener('input', function () {
                document.getElementById('progressValue').textContent = this.value + '%';
            });
        });

        // Funci√≥n para agregar nueva idea
        function addIdea() {
            const title = document.getElementById('ideaTitle').value.trim();
            const description = document.getElementById('ideaDescription').value.trim();
            const category = document.getElementById('ideaCategory').value;
            const priority = document.getElementById('ideaPriority').value;

            if (!title) {
                alert('Por favor, ingresa un t√≠tulo para la idea.');
                return;
            }

            const newIdea = {
                id: Date.now(),
                title: title,
                description: description,
                category: category || 'Sin categor√≠a',
                priority: priority,
                status: 'idea',
                progress: 0,
                notes: '',
                tasks: [],
                resources: [],
                createdAt: new Date().toISOString(),
                updatedAt: new Date().toISOString()
            };

            ideas.push(newIdea);
            saveIdeas();
            displayIdeas();
            clearForm();
        }

        // Funci√≥n para limpiar el formulario
        function clearForm() {
            document.getElementById('ideaTitle').value = '';
            document.getElementById('ideaDescription').value = '';
            document.getElementById('ideaCategory').value = '';
            document.getElementById('ideaPriority').value = 'media';
        }

        // Funci√≥n para mostrar ideas
        function displayIdeas() {
            const container = document.getElementById('ideasContainer');
            container.innerHTML = '';

            if (ideas.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <h3>¬°Comienza agregando tu primera idea!</h3>
                        <p>Usa el formulario de arriba para crear una nueva idea y comenzar a desarrollarla.</p>
                    </div>
                `;
                return;
            }

            ideas.forEach((idea, index) => {
                const ideaCard = createIdeaCard(idea, index);
                container.appendChild(ideaCard);
            });
        }

        // Funci√≥n para crear tarjeta de idea
        function createIdeaCard(idea, index) {
            const card = document.createElement('div');
            card.className = 'idea-card';
            card.setAttribute('data-category', idea.category);
            card.setAttribute('data-priority', idea.priority);

            const statusIcon = getStatusIcon(idea.status);
            const priorityClass = `priority-${idea.priority}`;
            const createdDate = new Date(idea.createdAt).toLocaleDateString();

            card.innerHTML = `
                <div class="idea-header">
                    <h3 class="idea-title">${idea.title}</h3>
                    <div class="idea-badges">
                        <span class="category-badge">${idea.category}</span>
                        <span class="priority-badge ${priorityClass}">${idea.priority.toUpperCase()}</span>
                    </div>
                </div>
                <div class="idea-content">
                    <p class="idea-description">${idea.description || 'Sin descripci√≥n'}</p>
                    <div class="idea-meta">
                        <div class="status-info">
                            <span class="status-badge">${statusIcon} ${getStatusText(idea.status)}</span>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${idea.progress}%"></div>
                                <span class="progress-text">${idea.progress}%</span>
                            </div>
                        </div>
                        <div class="idea-stats">
                            <span>üìù ${idea.tasks.length} tareas</span>
                            <span>üîó ${idea.resources.length} recursos</span>
                        </div>
                    </div>
                </div>
                <div class="idea-footer">
                    <span class="created-date">Creada: ${createdDate}</span>
                    <button class="view-details-btn" onclick="openIdeaModal(${index})">Ver Detalles</button>
                </div>
            `;

            return card;
        }

        // Funciones auxiliares para estado
        function getStatusIcon(status) {
            const icons = {
                'idea': 'üí°',
                'desarrollo': 'üî®',
                'pausa': '‚è∏Ô∏è',
                'completado': '‚úÖ',
                'cancelado': '‚ùå'
            };
            return icons[status] || 'üí°';
        }

        function getStatusText(status) {
            const texts = {
                'idea': 'Idea',
                'desarrollo': 'En Desarrollo',
                'pausa': 'En Pausa',
                'completado': 'Completado',
                'cancelado': 'Cancelado'
            };
            return texts[status] || 'Idea';
        }

        // Funci√≥n para filtrar ideas
        function filterIdeas() {
            const searchTerm = document.getElementById('searchIdeas').value.toLowerCase();
            const categoryFilter = document.getElementById('filterCategory').value;
            const priorityFilter = document.getElementById('filterPriority').value;

            const filteredIdeas = ideas.filter(idea => {
                const matchesSearch = idea.title.toLowerCase().includes(searchTerm) ||
                    idea.description.toLowerCase().includes(searchTerm);
                const matchesCategory = !categoryFilter || idea.category === categoryFilter;
                const matchesPriority = !priorityFilter || idea.priority === priorityFilter;

                return matchesSearch && matchesCategory && matchesPriority;
            });

            displayFilteredIdeas(filteredIdeas);
        }

        function displayFilteredIdeas(filteredIdeas) {
            const container = document.getElementById('ideasContainer');
            container.innerHTML = '';

            if (filteredIdeas.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <h3>No se encontraron ideas</h3>
                        <p>Intenta ajustar los filtros de b√∫squeda.</p>
                    </div>
                `;
                return;
            }

            filteredIdeas.forEach((idea) => {
                const index = ideas.indexOf(idea);
                const ideaCard = createIdeaCard(idea, index);
                container.appendChild(ideaCard);
            });
        }

        // Funciones del modal
        function openIdeaModal(index) {
            currentIdeaIndex = index;
            const idea = ideas[index];

            // Cargar datos en el modal
            document.getElementById('modalTitle').textContent = idea.title;
            document.getElementById('editTitle').value = idea.title;
            document.getElementById('editDescription').value = idea.description;
            document.getElementById('editCategory').value = idea.category;
            document.getElementById('editPriority').value = idea.priority;
            document.getElementById('editStatus').value = idea.status;
            document.getElementById('editProgress').value = idea.progress;
            document.getElementById('progressValue').textContent = idea.progress + '%';
            document.getElementById('ideaNotes').value = idea.notes || '';

            // Cargar tareas
            loadIdeaTasks(idea.tasks);

            // Cargar recursos
            loadIdeaResources(idea.resources);

            // Mostrar modal
            document.getElementById('ideaModal').style.display = 'block';

            // Activar primera pesta√±a
            openTab({ target: document.querySelector('.tab-button') }, 'details');
        }

        function closeIdeaModal() {
            document.getElementById('ideaModal').style.display = 'none';
            currentIdeaIndex = -1;
        }

        function openTab(evt, tabName) {
            const tabContents = document.getElementsByClassName('tab-content');
            const tabButtons = document.getElementsByClassName('tab-button');

            // Ocultar todas las pesta√±as
            for (let i = 0; i < tabContents.length; i++) {
                tabContents[i].classList.remove('active');
            }

            // Desactivar todos los botones
            for (let i = 0; i < tabButtons.length; i++) {
                tabButtons[i].classList.remove('active');
            }

            // Mostrar pesta√±a seleccionada
            document.getElementById(tabName).classList.add('active');
            evt.target.classList.add('active');
        }

        // Funciones para tareas
        function loadIdeaTasks(tasks) {
            const tasksList = document.getElementById('ideaTasks');
            tasksList.innerHTML = '';

            tasks.forEach((task, index) => {
                const li = document.createElement('li');
                li.className = 'task-item-modal';
                li.innerHTML = `
                    <input type="checkbox" ${task.completed ? 'checked' : ''} 
                           onchange="toggleTaskComplete(${index})">
                    <span class="${task.completed ? 'completed' : ''}">${task.text}</span>
                    <button onclick="removeTaskFromIdea(${index})" class="remove-task">√ó</button>
                `;
                tasksList.appendChild(li);
            });
        }

        function addTaskToIdea() {
            const taskText = document.getElementById('newTaskText').value.trim();
            if (!taskText) return;

            const idea = ideas[currentIdeaIndex];
            idea.tasks.push({
                text: taskText,
                completed: false,
                createdAt: new Date().toISOString()
            });

            document.getElementById('newTaskText').value = '';
            loadIdeaTasks(idea.tasks);
        }

        function toggleTaskComplete(taskIndex) {
            const idea = ideas[currentIdeaIndex];
            idea.tasks[taskIndex].completed = !idea.tasks[taskIndex].completed;
            loadIdeaTasks(idea.tasks);
        }

        function removeTaskFromIdea(taskIndex) {
            const idea = ideas[currentIdeaIndex];
            idea.tasks.splice(taskIndex, 1);
            loadIdeaTasks(idea.tasks);
        }

        // Funciones para recursos
        function loadIdeaResources(resources) {
            const resourcesList = document.getElementById('ideaResources');
            resourcesList.innerHTML = '';

            resources.forEach((resource, index) => {
                const li = document.createElement('li');
                li.className = 'resource-item';
                li.innerHTML = `
                    <div class="resource-info">
                        <a href="${resource.url}" target="_blank" class="resource-link">
                            üîó ${resource.title}
                        </a>
                        <span class="resource-url">${resource.url}</span>
                    </div>
                    <button onclick="removeResourceFromIdea(${index})" class="remove-resource">√ó</button>
                `;
                resourcesList.appendChild(li);
            });
        }

        function addResourceToIdea() {
            const title = document.getElementById('resourceTitle').value.trim();
            const url = document.getElementById('resourceUrl').value.trim();

            if (!title || !url) {
                alert('Por favor, completa tanto el t√≠tulo como la URL del recurso.');
                return;
            }

            const idea = ideas[currentIdeaIndex];
            idea.resources.push({
                title: title,
                url: url,
                createdAt: new Date().toISOString()
            });

            document.getElementById('resourceTitle').value = '';
            document.getElementById('resourceUrl').value = '';
            loadIdeaResources(idea.resources);
        }

        function removeResourceFromIdea(resourceIndex) {
            const idea = ideas[currentIdeaIndex];
            idea.resources.splice(resourceIndex, 1);
            loadIdeaResources(idea.resources);
        }

        // Funci√≥n para guardar cambios
        function saveIdeaChanges() {
            if (currentIdeaIndex === -1) return;

            const idea = ideas[currentIdeaIndex];

            // Actualizar datos b√°sicos
            idea.title = document.getElementById('editTitle').value.trim();
            idea.description = document.getElementById('editDescription').value.trim();
            idea.category = document.getElementById('editCategory').value;
            idea.priority = document.getElementById('editPriority').value;
            idea.status = document.getElementById('editStatus').value;
            idea.progress = parseInt(document.getElementById('editProgress').value);
            idea.notes = document.getElementById('ideaNotes').value;
            idea.updatedAt = new Date().toISOString();

            saveIdeas();
            displayIdeas();
            closeIdeaModal();

            alert('Cambios guardados exitosamente!');
        }

        // Funci√≥n para eliminar idea
        function deleteCurrentIdea() {
            if (currentIdeaIndex === -1) return;

            if (confirm('¬øEst√°s seguro de que quieres eliminar esta idea? Esta acci√≥n no se puede deshacer.')) {
                ideas.splice(currentIdeaIndex, 1);
                saveIdeas();
                displayIdeas();
                closeIdeaModal();
            }
        }

        // Funci√≥n para guardar en localStorage
        function saveIdeas() {
            localStorage.setItem('ideas', JSON.stringify(ideas));
        }

        // Cerrar modal al hacer clic fuera
        window.onclick = function (event) {
            const modal = document.getElementById('ideaModal');
            if (event.target === modal) {
                closeIdeaModal();
            }
        }
    </script>
</body>

</html>